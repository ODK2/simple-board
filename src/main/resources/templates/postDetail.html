<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>게시글 상세보기</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
<h2>게시글 상세보기</h2>

<p><strong>ID:</strong> <span th:text="${post.id}">1</span></p>
<p><strong>제목:</strong> <span th:text="${post.title}">제목</span></p>
<p><strong>내용:</strong> <span th:text="${post.content}">내용</span></p>
<p><strong>작성자:</strong> <span th:text="${post.writer}">작성자</span></p>

<br>
<a th:href="@{'/posts/' + ${post.id}} + '/edit'">수정</a>
<button id="deleteBtn" th:attr="data-id=${post.id}">🗑 삭제</button>

<br>
<a href="/posts">⬅ 목록으로 돌아가기</a>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    debugger; // ✅ 이 줄에서 중단점 잘 걸림!

    document.getElementById("deleteBtn").addEventListener("click", function () {
      const id = this.getAttribute("data-id");
      if (confirm("정말 삭제하시겠습니까?")) {
        fetch('/api/posts/' + id, {
          method: 'DELETE'
        })
        .then(res => {
          if (res.ok) {
            alert("삭제 완료!");
            location.href = "/posts";
          } else {
            alert("삭제 실패");
          }
        });
      }
    });
  });
</script>
</body>
</html>